# Effect Hook

Effect Hook:用于在函数组件中处理副作用





副作用：

1. ajax
2. 计时器
3. 其他异步操作
4. 更改正式DOM对象
5. 本地存储
6. 其他会对外部产生影响的操作



函数：useEffect, 该函数接受一个函数作为参数，接收的函数就是需要进行副作用操作的函数



**细节**

1. 该函数运行的时间点是在页面完成真是的UI渲染之后，因此它的执行是异步的，并且不会阻塞浏览器
   1. 与类组件中componentDidMount 和 componentIDid的区别： componentDidMount 和 componentIDid，更改了真实的DOM，但是用户还没有看到UI更新，同步的。
2. 每个组件函数可以使用多个useEffect，但是不要放在循环或者判断中
3. useEffect中的副作用函数，可以有返回值，返回值必须是一个函数，该函数叫做清理函数
   1. 该函数运行时间点，在每次运行副作用函数之前
   2. 首次渲染组件不会运行
   3. 组件被销毁是一定会运行
4. useEffect函数可以传递第二个参数
   1. 第二个参数是一个数组
   2. 数组中记录该副作用的依赖数据
   3. 当组件重新渲染后，只有依赖数据与上一次 不一样时，才会执行副作用函数
   4. 所以，当传递了依赖数据之后，如果函数没有发生变化
      1. 副作用函数仅在第一次渲染后运行
      2. 清理函数仅在卸载组件后运行
5. 副作用函数中，如果使用了函数上下文的变量，则由于闭包的影响，会导致副作用函数中变量不会实时变化
6. 副作用函数在每次注册时，会覆盖掉之前的副作用函数，因此，尽量保持副作用函数稳定，否则控制起来会比较复杂。



```tsx
useEffect(()=>{
 ......
  
  return ()=>{
    console.log('清理函数')
  }
},[])
```

